<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ng1bs5 Quick Example - Using ng-template</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="ng1bs5.css" rel="stylesheet">
  
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <script src="module.js"></script>
  <script src="loading-overlay.service.js"></script>
  <script src="loading-overlay.directive.js"></script>
</head>
<body ng-controller="MainCtrl">
  
  <!-- Include Default Templates -->
  <script type="text/ng-template" id="defaultTemplate.html">
    <div class="bs-loading-overlay bs-loading-overlay-light" style="
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      background-color: rgba(255, 255, 255, 0.9) !important;
      z-index: 99999 !important;
      pointer-events: auto !important;
    ">
      <div class="spinner-border" 
           role="status"
           ng-class="options.spinnerClass || 'text-primary'"
           ng-style="options.spinnerStyle || { width: '3rem', height: '3rem' }">
        <span class="visually-hidden">{{ options.loadingText || 'Loading...' }}</span>
      </div>
    </div>
  </script>
  
  <div class="container mt-5">
    <h1 class="mb-4">ng1bs5 Quick Example</h1>
    <p class="lead">Using <code>&lt;script type="text/ng-template"&gt;</code></p>
    
    <div class="card">
      <div class="card-header">
        <h3>Simple Loading Overlay</h3>
      </div>
      <div class="card-body">
        <button class="btn btn-primary me-2" ng-click="loadData()">Load Data</button>
        <button class="btn btn-secondary" ng-click="stopLoading()">Stop Loading</button>
        
        <!-- Overlay Container -->
        <div class="mt-3 p-4 border rounded" 
             bs-loading-overlay="dataPanel"
             style="min-height: 200px; background-color: #f8f9fa;">
          <h5>Data Panel</h5>
          <p ng-if="!data">Click "Load Data" to start loading...</p>
          <div ng-if="data" class="alert alert-success">
            <strong>Success!</strong> {{ data }}
          </div>
        </div>
      </div>
    </div>
    
    <div class="card mt-4">
      <div class="card-header bg-info text-white">
        <h3>How It Works</h3>
      </div>
      <div class="card-body">
        <h5>1. Include the template in your HTML:</h5>
        <pre class="bg-dark text-light p-3">&lt;script type="text/ng-template" id="defaultTemplate.html"&gt;
  &lt;div class="bs-loading-overlay"&gt;
    &lt;div class="spinner-border"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;</pre>
        
        <h5 class="mt-3">2. Configure the service to use templateUrl:</h5>
        <pre class="bg-dark text-light p-3">angular.module('myApp', ['ng1bs5'])
  .run(function(LoadingOverlayService) {
    LoadingOverlayService.setGlobalConfig({
      templateUrl: 'defaultTemplate.html'  // Points to ng-template id
    });
  });</pre>
        
        <h5 class="mt-3">3. Use the directive:</h5>
        <pre class="bg-dark text-light p-3">&lt;div bs-loading-overlay="dataPanel"&gt;
  Your content
&lt;/div&gt;

&lt;button ng-click="loadData()"&gt;Load&lt;/button&gt;</pre>
        
        <h5 class="mt-3">4. Control from JavaScript:</h5>
        <pre class="bg-dark text-light p-3">$scope.loadData = function() {
  LoadingOverlayService.start({ referenceId: 'dataPanel' });
  
  $timeout(function() {
    LoadingOverlayService.stop({ referenceId: 'dataPanel' });
  }, 2000);
};</pre>
      </div>
    </div>
    
    <div class="alert alert-success mt-4">
      <h5>âœ… Benefits of Using ng-template:</h5>
      <ul class="mb-0">
        <li>No separate JavaScript file needed for templates</li>
        <li>Templates are in HTML where they belong</li>
        <li>Easier to customize and maintain</li>
        <li>Angular's built-in template caching</li>
        <li>Can use ng-include or copy templates directly</li>
      </ul>
    </div>
  </div>
  
  <script>
    angular.module('myApp', ['ng1bs5'])
      .run(function(LoadingOverlayService) {
        LoadingOverlayService.setGlobalConfig({
          templateUrl: 'defaultTemplate.html'  // Use ng-template
        });
      })
      .controller('MainCtrl', function($scope, $timeout, LoadingOverlayService) {
        $scope.data = null;
        
        $scope.loadData = function() {
          $scope.data = null;
          
          LoadingOverlayService.wrap(
            { referenceId: 'dataPanel' },
            $timeout(function() {
              return 'Data loaded at ' + new Date().toLocaleTimeString();
            }, 2000)
          ).then(function(result) {
            $scope.data = result;
          });
        };
        
        $scope.stopLoading = function() {
          LoadingOverlayService.stop({ referenceId: 'dataPanel' });
        };
      });
  </script>
</body>
</html>
